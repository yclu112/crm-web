import{i as e}from"./index-623383b6.js";import{d as t,r as a,l as i,N as r,O as s,o as n,e as d}from"./index-6dfdc0ee.js";const l={id:"tradePie",style:{height:"400px",width:"100%"}},o=t({__name:"ContractDataChart",props:{data:{type:Object,required:!0,default:()=>({timeList:[],countList:[]})}},setup(t){const o=t,u=a(null);let m;const v=()=>{const t=Array.isArray(o.data.timeList)?o.data.timeList:[],a=Array.isArray(o.data.countList)?o.data.countList:[],i=t.map((e,t)=>({name:e||`未知时间${t}`,value:Number(a[t])||0})).filter(e=>e.value>0);if(0===i.length)return void(u.value&&(u.value.clear(),u.value.setOption({title:{text:"暂无数据",left:"center",top:"middle"},series:[]})));const r=document.getElementById("tradePie");if(!r)return;u.value&&u.value.dispose(),u.value=e(r);const s={title:{text:"合同数量分布",subtext:"2025年1-10月",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:i.map(e=>e.name)},series:[{name:"合同数量",type:"pie",radius:"50%",data:i,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};u.value.setOption(s),m=()=>{var e;return null==(e=u.value)?void 0:e.resize()},window.removeEventListener("resize",m),window.addEventListener("resize",m)};return i(()=>[o.data.timeList,o.data.countList],()=>v(),{immediate:!0,deep:!0}),r(v),s(()=>{u.value&&(u.value.dispose(),u.value=null),m&&window.removeEventListener("resize",m)}),(e,t)=>(n(),d("div",l))}});export{o as _};
