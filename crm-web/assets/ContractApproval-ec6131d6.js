import{d as e,r as a,a as t,b as l,c as i,o,e as r,f as s,w as p,g as n,h as u,i as m,u as c,j as d,k as _}from"./index-6dfdc0ee.js";import{_ as b}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-25415f8a.js";import{C as v}from"./index-6fd7493a.js";import{C as h}from"./enum-ebf888b2.js";import{u as f}from"./useHandleData-bcc6e8c1.js";import{_ as y}from"./ApprovalDialog.vue_vue_type_script_setup_true_lang-36baf01b.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./print-7c839e56.js";const g={class:"table-box"},j=e({__name:"ContractApproval",setup(e){const j=a(),C=t({status:1}),x=e=>({list:e.list.sort((e,a)=>Number(e.id)-Number(a.id)),total:e.total}),k=[{type:"selection",fixed:"left",width:60},{prop:"name",label:"合同名称",minWidth:120,search:{el:"input"}},{prop:"number",label:"合同编号",minWidth:120,search:{el:"input"}},{prop:"customerName",label:"客户姓名",minWidth:120,search:{el:"input"}},{prop:"amount",label:"合同金额",minWidth:100},{prop:"receivedAmount",label:"已收到款项",minWidth:140},{prop:"status",label:"合同状态",minWidth:120,enum:Object.values(h),search:{el:"select"}},{prop:"signTime",label:"签约时间",minWidth:140},{prop:"startTime",label:"合同开始时间",minWidth:140},{prop:"endTime",label:"合同结束时间",minWidth:140},{prop:"operation",label:"操作",fixed:"right",width:330}],W=a(!1),w=a(0),T=a(0),A=(e,a)=>{T.value=e.id,w.value=a,W.value=!0},P=async e=>{await f(v.approvalContract,e,0===e.type?"合同审核通过":"合同审核不通过"),W.value=!1,j.value.getTableList()};return(e,a)=>{const t=l("el-button"),h=i("hasPermi");return o(),r("div",g,[s(b,{ref_key:"proTable",ref:j,title:"合同列表",columns:k,requestApi:c(v).page,initParam:C,dataCallback:x,searchCol:{xs:2,sm:3,md:4,lg:6,xl:8}},{operation:p(e=>[n((o(),u(t,{type:"success",link:"",icon:c(d),onClick:a=>A(e.row,0)},{default:p(()=>[...a[2]||(a[2]=[m("审核通过",-1)])]),_:1},8,["icon","onClick"])),[[h,["sys:contract:pass"]]]),n((o(),u(t,{type:"danger",link:"",icon:c(_),onClick:a=>A(e.row,1)},{default:p(()=>[...a[3]||(a[3]=[m("审核不通过",-1)])]),_:1},8,["icon","onClick"])),[[h,["sys:contract:reject"]]])]),_:1},8,["requestApi","initParam"]),s(y,{modelValue:W.value,"onUpdate:modelValue":a[0]||(a[0]=e=>W.value=e),"approval-type":w.value,"contract-id":T.value,onSubmit:P,onClose:a[1]||(a[1]=e=>W.value=!1)},null,8,["modelValue","approval-type","contract-id"])])}}});export{j as default};
