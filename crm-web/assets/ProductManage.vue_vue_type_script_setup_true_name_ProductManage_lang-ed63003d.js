import{_ as e}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-25415f8a.js";import{P as t}from"./enum-ebf888b2.js";import{J as a,K as s,d as i,r as o,a as r,b as l,c as p,o as n,e as u,f as c,D as d,w as m,g as _,h as f,i as y,u as b,m as g,n as h,$ as v,q as k,a0 as w}from"./index-6dfdc0ee.js";import{_ as x}from"./ProductDialog.vue_vue_type_script_setup_true_lang-c7213267.js";import{_ as P}from"./ProductStateDialog.vue_vue_type_script_setup_true_lang-52d28081.js";const C={page:e=>a.post(s+"/product/page",e),saveOrEdit:e=>a.post(s+"/product/saveOrEdit",e),remove:e=>a.post(s+"/product/remove",e)},T={class:"table-box"},H=i({__name:"ProductManage",props:{isShowHeader:{type:Boolean,default:!0},status:{type:Number,default:null}},setup(a,{expose:s}){const i=o(),H=a,j=r({status:H.status});s({proTable:i});const S=e=>({list:e.list,total:e.total}),E=[{type:"selection",fixed:"left",width:60},{prop:"name",label:"商品名称",minWidth:120,search:{el:"input"}},{prop:"price",label:"价格",minWidth:120},{prop:"sales",label:"销量",minWidth:120},{prop:"stock",label:"库存数量",minWidth:120},{prop:"status",label:"商品状态",minWidth:120,enum:Object.values(t),search:{el:"select"}},{prop:"operation",label:"操作",fixed:"right",width:230,isShow:H.isShowHeader}],O=o(),W=(e,t={})=>{let a={title:e,row:{...t},isView:"查看"===e,api:C.saveOrEdit,getTableList:i.value.getTableList,maxHeight:"450px"};O.value.acceptParams(a)},D=o(),L=(e,t={})=>{let a={title:e,row:{...t},api:C.saveOrEdit,getTableList:i.value.getTableList,maxHeight:"150px"};D.value.acceptParams(a)};return(t,a)=>{const s=l("el-button"),o=p("hasPermi");return n(),u("div",T,[c(e,{ref_key:"proTable",ref:i,title:"商品列表",columns:E,requestApi:b(C).page,initParam:j,dataCallback:S,searchCol:{xs:2,sm:3,md:4,lg:6,xl:8}},d({_:2},[H.isShowHeader?{name:"tableHeader",fn:m(()=>[_((n(),f(s,{type:"primary",icon:b(g),onClick:a[0]||(a[0]=e=>W("新增"))},{default:m(()=>[...a[1]||(a[1]=[y("新增商品",-1)])]),_:1},8,["icon"])),[[o,["sys:product:add"]]])]),key:"0"}:void 0,H.isShowHeader?{name:"operation",fn:m(e=>[_((n(),f(s,{type:"primary",link:"",icon:b(h),onClick:t=>W("编辑",e.row)},{default:m(()=>[...a[2]||(a[2]=[y("编辑",-1)])]),_:1},8,["icon","onClick"])),[[o,["sys:product:edit"]]]),1!==e.row.status?_((n(),f(s,{key:0,type:"success",link:"",icon:b(v),onClick:t=>L("商品定时上架",e.row)},{default:m(()=>[...a[3]||(a[3]=[y("定时上架",-1)])]),_:1},8,["icon","onClick"])),[[o,["sys:product:up"]]]):k("",!0),1===e.row.status?_((n(),f(s,{key:1,type:"danger",link:"",icon:b(w),onClick:t=>L("商品定时下架",e.row)},{default:m(()=>[...a[4]||(a[4]=[y("定时下架",-1)])]),_:1},8,["icon","onClick"])),[[o,["sys:product:down"]]]):k("",!0)]),key:"1"}:void 0]),1032,["requestApi","initParam"]),c(x,{ref_key:"dialogRef",ref:O},null,512),c(P,{ref_key:"stateDialogRef",ref:D},null,512)])}}});export{H as _};
