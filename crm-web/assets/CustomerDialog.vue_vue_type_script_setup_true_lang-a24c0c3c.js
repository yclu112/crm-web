import{d as e,r as l,a,b as u,o,h as r,w as s,t,v as d,f as i,e as v,B as m,u as n,F as p,x as b,i as c,g as w,y as f,z as g}from"./index-6dfdc0ee.js";import{_ as h}from"./Dialog.vue_vue_type_style_index_0_lang-6e721bb1.js";import{a as V,b as _,F as y,I as x,G as k}from"./enum-ebf888b2.js";const U=e({__name:"CustomerDialog",setup(e,{expose:U}){const j=l(!1),q=l({isView:!1,title:"",row:{},labelWidth:160,fullscreen:!1,maxHeight:"500px"});U({acceptParams:e=>{e.row={...q.value.row,...e.row},q.value={...q.value,...e},j.value=!0}});const D=a({name:[{required:!0,message:"请输入客户名称",trigger:"blur"}],phone:[{required:!0,message:"请输入客户手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{pattern:/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,message:"邮箱格式不正确",trigger:"blur"}],level:[{required:!0,message:"客户级别不能为空",trigger:"blur"}],source:[{required:!0,message:"客户来源不能为空",trigger:"blur"}]}),F=l(),O=()=>{F.value.validate(async e=>{if(e)try{delete q.value.row.updateTime,delete q.value.row.createTime,await q.value.api(q.value.row),g.success({message:`${q.value.title}成功！`}),q.value.getTableList(),j.value=!1,F.value.resetFields(),z(!0)}catch(l){}})},z=e=>{j.value=!1;(["查看","编辑"].includes(q.value.title)||e)&&(q.value.row={},F.value.resetFields())};return(e,l)=>{const a=u("el-input"),g=u("el-form-item"),U=u("el-option"),M=u("el-select"),$=u("el-form"),A=u("el-button");return o(),r(n(h),{"model-value":j.value,title:q.value.title,fullscreen:q.value.fullscreen,"max-height":q.value.maxHeight,"cancel-dialog":z,width:"50%"},{footer:s(()=>[t(e.$slots,"footer",{},()=>[i(A,{onClick:z},{default:s(()=>[...l[9]||(l[9]=[c("取消",-1)])]),_:1}),w(i(A,{type:"primary",onClick:O},{default:s(()=>[...l[10]||(l[10]=[c("确定",-1)])]),_:1},512),[[f,!q.value.isView]])])]),default:s(()=>[d("div",{style:b("width: calc(100% - "+q.value.labelWidth/2+"px)")},[i($,{ref_key:"ruleFormRef",ref:F,"label-position":"right","label-width":q.value.labelWidth+"px",rules:D,model:q.value.row,disabled:q.value.isView,"hide-required-asterisk":q.value.isView},{default:s(()=>[i(g,{label:"客户名称",prop:"name"},{default:s(()=>[i(a,{modelValue:q.value.row.name,"onUpdate:modelValue":l[0]||(l[0]=e=>q.value.row.name=e),placeholder:"请填写客户名称",clearable:"",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),i(g,{label:"客户手机号",prop:"phone"},{default:s(()=>[i(a,{modelValue:q.value.row.phone,"onUpdate:modelValue":l[1]||(l[1]=e=>q.value.row.phone=e),placeholder:"请填写客户手机号",clearable:"",maxlength:"11","show-word-limit":""},null,8,["modelValue"])]),_:1}),i(g,{label:"客户邮箱",prop:"email"},{default:s(()=>[i(a,{modelValue:q.value.row.email,"onUpdate:modelValue":l[2]||(l[2]=e=>q.value.row.email=e),placeholder:"请填写客户邮箱",clearable:"",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),i(g,{label:"客户地址",prop:"address"},{default:s(()=>[i(a,{modelValue:q.value.row.address,"onUpdate:modelValue":l[3]||(l[3]=e=>q.value.row.address=e),placeholder:"请填写客户地址",clearable:"",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),i(g,{label:"客户等级",prop:"level"},{default:s(()=>[i(M,{modelValue:q.value.row.level,"onUpdate:modelValue":l[4]||(l[4]=e=>q.value.row.level=e),filterable:"",placeholder:"请选择客户等级",class:"w-full"},{default:s(()=>[(o(!0),v(p,null,m(Object.values(n(V)),e=>(o(),r(U,{key:e.value,label:e.label,value:e.value,class:"isabel-option"},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(g,{label:"客户来源",prop:"source"},{default:s(()=>[i(M,{modelValue:q.value.row.source,"onUpdate:modelValue":l[5]||(l[5]=e=>q.value.row.source=e),filterable:"",placeholder:"请选择客户来源",class:"w-full"},{default:s(()=>[(o(!0),v(p,null,m(Object.values(n(_)),e=>(o(),r(U,{key:e.value,label:e.label,value:e.value,class:"isabel-option"},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(g,{label:"跟进状态",prop:"followStatus"},{default:s(()=>[i(M,{modelValue:q.value.row.followStatus,"onUpdate:modelValue":l[6]||(l[6]=e=>q.value.row.followStatus=e),filterable:"",placeholder:"请选择客户跟进状态",class:"w-full"},{default:s(()=>[(o(!0),v(p,null,m(Object.values(n(y)),e=>(o(),r(U,{key:e.value,label:e.label,value:e.value,class:"isabel-option"},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(g,{label:"是否为关键决策人",prop:"isKeyDecisionMaker"},{default:s(()=>[i(M,{modelValue:q.value.row.isKeyDecisionMaker,"onUpdate:modelValue":l[7]||(l[7]=e=>q.value.row.isKeyDecisionMaker=e),filterable:"",placeholder:"请选择客户是否为关键决策人",class:"w-full"},{default:s(()=>[(o(!0),v(p,null,m(Object.values(n(x)),e=>(o(),r(U,{key:e.value,label:e.label,value:e.value,class:"isabel-option"},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(g,{label:"客户性别",prop:"gender"},{default:s(()=>[i(M,{modelValue:q.value.row.gender,"onUpdate:modelValue":l[8]||(l[8]=e=>q.value.row.gender=e),filterable:"",placeholder:"请选择客户性别",class:"w-full"},{default:s(()=>[(o(!0),v(p,null,m(Object.values(n(k)),e=>(o(),r(U,{key:e.value,label:e.label,value:e.value,class:"isabel-option"},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label-width","rules","model","disabled","hide-required-asterisk"])],4)]),_:3},8,["model-value","title","fullscreen","max-height"])}}});export{U as _};
