import{d as e,r as l,a,b as u,o,h as r,w as t,t as s,v as d,f as i,e as v,B as m,u as n,F as p,q as b,x as c,i as w,g as f,y as g,z as h}from"./index-6dfdc0ee.js";import{_ as V}from"./Dialog.vue_vue_type_style_index_0_lang-6e721bb1.js";import{a as _,b as x,F as y,L as k}from"./enum-ebf888b2.js";const q=e({__name:"LeadDialog",setup(e,{expose:q}){const U=l(!1),j=l({isView:!1,title:"",row:{},labelWidth:160,fullscreen:!1,maxHeight:"500px"});q({acceptParams:e=>{e.row={...j.value.row,...e.row},j.value={...j.value,...e},U.value=!0}});const F=a({name:[{required:!0,message:"请输入客户名称",trigger:"blur"}],phone:[{required:!0,message:"请输入客户手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{pattern:/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,message:"邮箱格式不正确",trigger:"blur"}],level:[{required:!0,message:"客户级别不能为空",trigger:"blur"}],source:[{required:!0,message:"客户来源不能为空",trigger:"blur"}],followStatus:[{required:!0,message:"客户来源不能为空",trigger:"blur"}]}),z=l(),O=()=>{z.value.validate(async e=>{if(e)try{delete j.value.row.updateTime,delete j.value.row.createTime,await j.value.api(j.value.row),h.success({message:`${j.value.title}成功！`}),j.value.getTableList(),U.value=!1,z.value.resetFields(),S(!0)}catch(l){}})},S=e=>{U.value=!1;(["查看","编辑"].includes(j.value.title)||e)&&(j.value.row={},z.value.resetFields())};return(e,l)=>{const a=u("el-input"),h=u("el-form-item"),q=u("el-option"),$=u("el-select"),A=u("el-form"),L=u("el-button");return o(),r(n(V),{"model-value":U.value,title:j.value.title,fullscreen:j.value.fullscreen,"max-height":j.value.maxHeight,"cancel-dialog":S,width:"50%"},{footer:t(()=>[s(e.$slots,"footer",{},()=>[i(L,{onClick:S},{default:t(()=>[...l[8]||(l[8]=[w("取消",-1)])]),_:1}),f(i(L,{type:"primary",onClick:O},{default:t(()=>[...l[9]||(l[9]=[w("确定",-1)])]),_:1},512),[[g,!j.value.isView]])])]),default:t(()=>[d("div",{style:c("width: calc(100% - "+j.value.labelWidth/2+"px)")},[i(A,{ref_key:"ruleFormRef",ref:z,"label-position":"right","label-width":j.value.labelWidth+"px",rules:F,model:j.value.row,disabled:j.value.isView,"hide-required-asterisk":j.value.isView},{default:t(()=>[i(h,{label:"线索名称",prop:"name"},{default:t(()=>[i(a,{modelValue:j.value.row.name,"onUpdate:modelValue":l[0]||(l[0]=e=>j.value.row.name=e),placeholder:"请填写线索名称",clearable:"",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),i(h,{label:"线索手机号",prop:"phone"},{default:t(()=>[i(a,{modelValue:j.value.row.phone,"onUpdate:modelValue":l[1]||(l[1]=e=>j.value.row.phone=e),placeholder:"请填写线索手机号",clearable:"",maxlength:"11","show-word-limit":""},null,8,["modelValue"])]),_:1}),i(h,{label:"线索邮箱",prop:"email"},{default:t(()=>[i(a,{modelValue:j.value.row.email,"onUpdate:modelValue":l[2]||(l[2]=e=>j.value.row.email=e),placeholder:"请填写线索邮箱",clearable:"",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),i(h,{label:"线索地址",prop:"address"},{default:t(()=>[i(a,{modelValue:j.value.row.address,"onUpdate:modelValue":l[3]||(l[3]=e=>j.value.row.address=e),placeholder:"请填写线索地址",clearable:"",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),i(h,{label:"线索等级",prop:"level"},{default:t(()=>[i($,{modelValue:j.value.row.level,"onUpdate:modelValue":l[4]||(l[4]=e=>j.value.row.level=e),filterable:"",placeholder:"请选择线索等级",class:"w-full"},{default:t(()=>[(o(!0),v(p,null,m(Object.values(n(_)),e=>(o(),r(q,{key:e.value,label:e.label,value:e.value,class:"isabel-option"},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(h,{label:"线索来源",prop:"source"},{default:t(()=>[i($,{modelValue:j.value.row.source,"onUpdate:modelValue":l[5]||(l[5]=e=>j.value.row.source=e),filterable:"",placeholder:"请选择线索来源",class:"w-full"},{default:t(()=>[(o(!0),v(p,null,m(Object.values(n(x)),e=>(o(),r(q,{key:e.value,label:e.label,value:e.value,class:"isabel-option"},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(h,{label:"跟进状态",prop:"followStatus"},{default:t(()=>[i($,{modelValue:j.value.row.followStatus,"onUpdate:modelValue":l[6]||(l[6]=e=>j.value.row.followStatus=e),filterable:"",placeholder:"请选择线索跟进状态",class:"w-full"},{default:t(()=>[(o(!0),v(p,null,m(Object.values(n(y)),e=>(o(),r(q,{key:e.value,label:e.label,value:e.value,class:"isabel-option"},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),j.value.row.id?(o(),r(h,{key:0,label:"线索状态",prop:"status"},{default:t(()=>[i($,{modelValue:j.value.row.status,"onUpdate:modelValue":l[7]||(l[7]=e=>j.value.row.status=e),filterable:"",placeholder:"请选择线索状态",class:"w-full"},{default:t(()=>[(o(!0),v(p,null,m(Object.values(n(k)),e=>(o(),r(q,{key:e.value,label:e.label,value:e.value,class:"isabel-option"},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):b("",!0)]),_:1},8,["label-width","rules","model","disabled","hide-required-asterisk"])],4)]),_:3},8,["model-value","title","fullscreen","max-height"])}}});export{q as _};
