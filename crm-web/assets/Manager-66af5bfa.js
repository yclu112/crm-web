import{u as e}from"./useHandleData-bcc6e8c1.js";import{r as a,ad as t,a3 as s,Q as l,d as i,ae as r,a as n,f as o,b as p,F as u,c,o as m,e as d,w as _,g as f,h as g,i as v,u as b,m as y,af as w,n as h,H as k}from"./index-6dfdc0ee.js";import{_ as x}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-25415f8a.js";import{_ as C}from"./ManagerDialog.vue_vue_type_script_setup_true_lang-726ab871.js";import{a as T,d as j,b as H,e as L}from"./index-9223e28c.js";import{g as P}from"./index-92b7ec21.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./print-7c839e56.js";import"./Dialog.vue_vue_type_style_index_0_lang-6e721bb1.js";const N={class:"table-box"},B=i({__name:"Manager",setup(i){const B=r(),D=a(),M=n({}),S=e=>({list:e.list,total:e.total}),A=e=>{let a={...e};return T(a)},{BUTTONS:I}=(()=>{const e=a(""),i=t();e.value=i.name;const r=s(()=>l().getAuthButtonList[e.value]||{});return{nowKey:e,BUTTONS:r}})(),K=[{type:"selection",fixed:"left",width:60},{prop:"account",label:"用户名",search:{el:"input"}},{prop:"email",label:"邮箱",search:{el:"input"},minWidth:180},{prop:"nickname",label:"昵称",search:{el:"input"}},{prop:"roleId",label:"角色",enum:P,fieldNames:{label:"name",value:"id"},search:{el:"input"}},{prop:"departId",label:"所属部门",enum:B.departmentList,fieldNames:{label:"name",value:"id"},search:{el:"cascader",span:2,props:{props:{checkStrictly:!0},filterable:!0}}},{prop:"status",label:"状态",render:e=>o(u,null,[I.value.status?o(p("el-switch"),{"model-value":e.row.status,"active-text":e.row.status?"启用":"禁用","active-value":1,"inactive-value":0},null):o(p("el-tag"),{type:e.row.status?"success":"danger"},{default:()=>[e.row.status?"启用":"禁用"]})])},{prop:"createTime",label:"创建时间",width:200},{prop:"operation",label:"操作",fixed:"right",width:330}],O=a(),U=(e,a={})=>{let t={title:e,row:{...a},isView:"查看"===e,api:"新增"===e?H:"编辑"===e||"重置"===e?L:"",getTableList:D.value.getTableList,maxHeight:"重置"===e?"100px":"420px"};O.value.acceptParams(t)};return(a,t)=>{const s=p("el-button"),l=c("hasPermi");return m(),d("div",N,[o(x,{ref_key:"proTable",ref:D,title:"管理员列表",columns:K,requestApi:A,initParam:M,dataCallback:S,searchCol:{xs:2,sm:3,md:4,lg:6,xl:8}},{tableHeader:_(()=>[f((m(),g(s,{type:"primary",icon:b(y),onClick:t[0]||(t[0]=e=>U("新增"))},{default:_(()=>[...t[1]||(t[1]=[v("新增管理员",-1)])]),_:1},8,["icon"])),[[l,["sys:manager:add"]]])]),operation:_(a=>[f((m(),g(s,{type:"info",link:"",icon:b(w),onClick:e=>U("查看",a.row)},{default:_(()=>[...t[2]||(t[2]=[v("查看",-1)])]),_:1},8,["icon","onClick"])),[[l,["sys:manager:view"]]]),f((m(),g(s,{type:"primary",link:"",icon:b(h),onClick:e=>U("编辑",a.row)},{default:_(()=>[...t[3]||(t[3]=[v("编辑",-1)])]),_:1},8,["icon","onClick"])),[[l,["sys:manager:edit"]]]),f((m(),g(s,{type:"warning",link:"",icon:b(h),onClick:e=>U("重置",a.row)},{default:_(()=>[...t[4]||(t[4]=[v("重置密码",-1)])]),_:1},8,["icon","onClick"])),[[l,["sys:manager:reset-psw"]]]),f((m(),g(s,{type:"danger",link:"",icon:b(k),onClick:t=>(async a=>{await e(j,[a.id],`删除【${a.account}】用户`),D.value.getTableList()})(a.row)},{default:_(()=>[...t[5]||(t[5]=[v("删除",-1)])]),_:1},8,["icon","onClick"])),[[l,["sys:manager:remove"]]])]),_:1},8,["initParam"]),o(C,{ref_key:"dialogRef",ref:O},null,512)])}}});export{B as default};
