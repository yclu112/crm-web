import{J as e,K as l,d as a,r as o,a3 as r,aM as u,b as t,o as d,e as i,f as n,w as p,u as s,aj as v,aq as m,h as c,v as w,F as f,B as b,ai as y,A as _,a as g,t as h,i as V,q as T,x as U,g as k,y as N,z as x}from"./index-6dfdc0ee.js";import{_ as q}from"./Dialog.vue_vue_type_style_index_0_lang-6e721bb1.js";import{_ as B}from"./_plugin-vue_export-helper-1b428a4d.js";const E=a=>e.post(l+"/sys/menu/list",a),M=a=>e.post(l+"/sys/menu/add",a),O=a=>e.post(l+"/sys/menu/edit",a),L=a=>e.post(l+"/sys/menu/remove",a),C={class:"icon-box"},R={class:"icon-list"},j=["onClick"],A=B(a({__name:"index",props:{iconValue:{default:""},title:{default:"请选择图标"},clearable:{type:Boolean,default:!0},placeholder:{default:"请选择图标"}},emits:["update:iconValue"],setup(e,{emit:l}){const a=o(e.iconValue),g=o(!1),h=()=>g.value=!0,V=l,T=o(),U=()=>{a.value="",V("update:iconValue",""),setTimeout(()=>T.value.blur(),0)},k=o(""),N=u,x=r(()=>{if(!k.value)return u;let e={};for(const l in N)l.toLowerCase().indexOf(k.value.toLowerCase())>-1&&(e[l]=N[l]);return e});return(l,o)=>{const r=t("el-button"),u=t("el-input"),q=t("el-icon"),B=t("el-scrollbar"),E=t("el-empty"),M=t("el-dialog");return d(),i("div",C,[n(u,v({ref_key:"inputRef",ref:T,modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e)},l.$attrs,{placeholder:e.placeholder,clearable:e.clearable,onClear:U,onClick:h}),{append:p(()=>[n(r,{icon:s(N)[e.iconValue]},null,8,["icon"])]),_:1},16,["modelValue","placeholder","clearable"]),n(M,{modelValue:g.value,"onUpdate:modelValue":o[2]||(o[2]=e=>g.value=e),title:e.placeholder,top:"50px",width:"66%"},{default:p(()=>[n(u,{modelValue:k.value,"onUpdate:modelValue":o[1]||(o[1]=e=>k.value=e),placeholder:"搜索图标",size:"large","prefix-icon":m},null,8,["modelValue","prefix-icon"]),Object.keys(x.value).length?(d(),c(B,{key:0},{default:p(()=>[w("div",R,[(d(!0),i(f,null,b(x.value,e=>(d(),i("div",{key:e,class:"icon-item",onClick:l=>(e=>{g.value=!1,a.value=e.name,V("update:iconValue",e.name),setTimeout(()=>T.value.blur(),0)})(e)},[n(q,{size:35},{default:p(()=>[(d(),c(y(e)))]),_:2},1024),w("span",null,_(e.name),1)],8,j))),128))])]),_:1})):(d(),c(E,{key:1,description:"未搜索到您要找的图标~"}))]),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-cd8ade8d"]]),I=B(a({__name:"MenuDialog",setup(a,{expose:r}){const u=o(!1),v=o({isView:!1,title:"",row:{type:"MENU",openType:"TAB",keepalive:!1,hide:!1,sort:0},labelWidth:160,fullscreen:!1,maxHeight:"500px"});r({acceptParams:e=>{e.row={...v.value.row,...e.row},v.value={...v.value,...e},u.value=!0,m()}});const m=async()=>{const{data:a}=await e.post(l+"/sys/menu/form",o,{headers:{noLoading:!0}});var o;v.value.menuList=a},y=g({parentId:[{required:!0,message:"请选择上级菜单",trigger:"change"}],type:[{required:!0,message:"请选择菜单类型",trigger:"change"}],name:[{required:!0,message:"请填写菜单name",trigger:"blur"}],title:[{required:!0,message:"请填写菜单名称",trigger:"blur"}],path:[{required:!0,validator:function(e,l,a){if(!l&&"BUTTON"!==v.value.row.type)return a(new Error("请填写路由路径"));a()},trigger:"blur"}],icon:[{required:!0,validator:function(e,l,a){if(!l&&"BUTTON"!==v.value.row.type)return a(new Error("请选择菜单图标"));a()},trigger:"blur"}],openType:[{required:!0,validator:function(e,l,a){if(!l&&"MENU"===v.value.row.type)return a(new Error("请选择打开方式"));a()},trigger:"change"}],component:[{required:!0,validator:function(e,l,a){if(!l&&"MENU"===v.value.row.type&&"TAB"===v.value.row.openType)return a(new Error("请填写组件路径"));a()},trigger:"blur"}],url:[{required:!0,validator:function(e,l,a){if(!l&&"MENU"===v.value.row.type&&"URL"===v.value.row.openType)return a(new Error("请填写链接地址"));a()},trigger:"blur"}],auth:[{required:!0,validator:function(e,l,a){if(!l&&"BUTTON"===v.value.row.type)return a(new Error("请填写授权标识"));a()},trigger:"blur"}],sort:[{required:!0,message:"请填写菜单排序",trigger:"blur"}],keepalive:[{required:!0,message:"请选择是否缓存",trigger:"change"}],hide:[{required:!0,message:"请选择是否显示",trigger:"change"}]}),_=o(),B=()=>{_.value.validate(async e=>{if(e)try{"BUTTON"===v.value.row.type&&(v.value.row.path="",v.value.row.icon="",v.value.row.openType=""),"MENU"!==v.value.row.type?v.value.row.openType="":"TAB"==v.value.row.openType?v.value.row.url="":"URL"==v.value.row.openType&&(v.value.row.component="");let e=v.value.row.keepalive?0:1;v.value.row.keepalive=e;let l=v.value.row.hide?0:1;v.value.row.hide=l,await v.value.api(v.value.row),x.success({message:`${v.value.title}菜单成功！`}),v.value.getTableList(),E(!0)}catch(l){}})},E=e=>{u.value=!1;(["查看","编辑"].includes(v.value.title)||e)&&(v.value.row={type:"MENU",openType:"TAB",keepalive:!1,hide:!1,sort:0},_.value.resetFields())};return(e,l)=>{const a=t("el-option"),o=t("el-select"),r=t("el-form-item"),m=t("el-radio"),g=t("el-radio-group"),x=t("el-input"),M=t("el-form"),O=t("el-button");return d(),c(s(q),{"model-value":u.value,title:v.value.title,fullscreen:v.value.fullscreen,"max-height":v.value.maxHeight,"cancel-dialog":E},{footer:p(()=>[h(e.$slots,"footer",{},()=>[n(O,{onClick:E},{default:p(()=>[...l[24]||(l[24]=[V("取消",-1)])]),_:1}),k(n(O,{type:"primary",onClick:B},{default:p(()=>[...l[25]||(l[25]=[V("确定",-1)])]),_:1},512),[[N,!v.value.isView]])],!0)]),default:p(()=>[w("div",{style:U("width: calc(100% - "+v.value.labelWidth/2+"px)")},[n(M,{ref_key:"ruleFormRef",ref:_,"label-position":"right","label-width":v.value.labelWidth+"px",rules:y,model:v.value.row,disabled:v.value.isView,"hide-required-asterisk":v.value.isView},{default:p(()=>[n(r,{label:"上级菜单",prop:"parentId"},{default:p(()=>[n(o,{modelValue:v.value.row.parentId,"onUpdate:modelValue":l[0]||(l[0]=e=>v.value.row.parentId=e),filterable:"",placeholder:"请选择",class:"w-full"},{default:p(()=>[(d(!0),i(f,null,b(v.value.menuList,e=>(d(),c(a,{key:e.id,label:e.title,value:e.id,class:"isabel-option",disabled:e.id==v.value.row.id},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(r,{label:"菜单类型",prop:"type"},{default:p(()=>[n(g,{modelValue:v.value.row.type,"onUpdate:modelValue":l[1]||(l[1]=e=>v.value.row.type=e)},{default:p(()=>[n(m,{label:"MENU_DIR",border:""},{default:p(()=>[...l[13]||(l[13]=[V("菜单目录",-1)])]),_:1}),n(m,{label:"MENU",border:""},{default:p(()=>[...l[14]||(l[14]=[V("菜单项",-1)])]),_:1}),n(m,{label:"BUTTON",border:""},{default:p(()=>[...l[15]||(l[15]=[V("按钮",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),n(r,{label:"菜单名称",prop:"title"},{default:p(()=>[n(x,{modelValue:v.value.row.title,"onUpdate:modelValue":l[2]||(l[2]=e=>v.value.row.title=e),placeholder:"请填写菜单名称",clearable:""},null,8,["modelValue"])]),_:1}),n(r,{label:"菜单name",prop:"name"},{default:p(()=>[n(x,{modelValue:v.value.row.name,"onUpdate:modelValue":l[3]||(l[3]=e=>v.value.row.name=e),placeholder:"请填写菜单name",clearable:""},null,8,["modelValue"])]),_:1}),"BUTTON"!==v.value.row.type?(d(),c(r,{key:0,label:"路由路径",prop:"path"},{default:p(()=>[n(x,{modelValue:v.value.row.path,"onUpdate:modelValue":l[4]||(l[4]=e=>v.value.row.path=e),placeholder:"请填写路由路径",clearable:""},null,8,["modelValue"])]),_:1})):T("",!0),"BUTTON"!==v.value.row.type?(d(),c(r,{key:1,label:"菜单图标",prop:"icon"},{default:p(()=>[n(A,{"icon-value":v.value.row.icon,"onUpdate:iconValue":l[5]||(l[5]=e=>v.value.row.icon=e)},null,8,["icon-value"])]),_:1})):T("",!0),"MENU"===v.value.row.type?(d(),c(r,{key:2,label:"打开方式",prop:"openType"},{default:p(()=>[n(g,{modelValue:v.value.row.openType,"onUpdate:modelValue":l[6]||(l[6]=e=>v.value.row.openType=e)},{default:p(()=>[n(m,{label:"TAB",border:""},{default:p(()=>[...l[16]||(l[16]=[V("选项卡",-1)])]),_:1}),n(m,{label:"URL",border:""},{default:p(()=>[...l[17]||(l[17]=[V("链接",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})):T("",!0),"BUTTON"!==v.value.row.type?(d(),c(r,{key:3,label:"是否显示",prop:"hide"},{default:p(()=>[n(g,{modelValue:v.value.row.hide,"onUpdate:modelValue":l[7]||(l[7]=e=>v.value.row.hide=e)},{default:p(()=>[n(m,{label:!1,border:""},{default:p(()=>[...l[18]||(l[18]=[V("显示",-1)])]),_:1}),n(m,{label:!0,border:""},{default:p(()=>[...l[19]||(l[19]=[V("隐藏",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})):T("",!0),"TAB"===v.value.row.openType&&"MENU"===v.value.row.type?(d(),c(r,{key:4,label:"组件路径",prop:"component"},{default:p(()=>[n(x,{modelValue:v.value.row.component,"onUpdate:modelValue":l[8]||(l[8]=e=>v.value.row.component=e),placeholder:"请填写组件路径"},{prepend:p(()=>[...l[20]||(l[20]=[V("@/src/views",-1)])]),append:p(()=>[...l[21]||(l[21]=[V(".vue",-1)])]),_:1},8,["modelValue"])]),_:1})):T("",!0),"URL"===v.value.row.openType&&"MENU"===v.value.row.type?(d(),c(r,{key:5,label:"链接地址",prop:"url"},{default:p(()=>[n(x,{modelValue:v.value.row.url,"onUpdate:modelValue":l[9]||(l[9]=e=>v.value.row.url=e),placeholder:"请填写链接的URL地址",clearable:""},null,8,["modelValue"])]),_:1})):T("",!0),"BUTTON"===v.value.row.type?(d(),c(r,{key:6,label:"授权标识",prop:"auth"},{default:p(()=>[n(x,{modelValue:v.value.row.auth,"onUpdate:modelValue":l[10]||(l[10]=e=>v.value.row.auth=e),placeholder:"授权标识（多个用逗号分隔，如：sys:menu:list,sys:menu:save）",clearable:"",disabled:"编辑"==v.value.title},null,8,["modelValue","disabled"])]),_:1})):T("",!0),n(r,{label:"菜单排序",prop:"sort"},{default:p(()=>[n(x,{modelValue:v.value.row.sort,"onUpdate:modelValue":l[11]||(l[11]=e=>v.value.row.sort=e),type:"number",placeholder:"请填写菜单排序"},null,8,["modelValue"])]),_:1}),n(r,{label:"缓存",prop:"keepalive"},{default:p(()=>[n(g,{modelValue:v.value.row.keepalive,"onUpdate:modelValue":l[12]||(l[12]=e=>v.value.row.keepalive=e)},{default:p(()=>[n(m,{label:!0,border:""},{default:p(()=>[...l[22]||(l[22]=[V("开启",-1)])]),_:1}),n(m,{label:!1,border:""},{default:p(()=>[...l[23]||(l[23]=[V("关闭",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label-width","rules","model","disabled","hide-required-asterisk"])],4)]),_:3},8,["model-value","title","fullscreen","max-height"])}}}),[["__scopeId","data-v-a9df8168"]]),z=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}));export{I as M,M as a,z as b,O as e,E as g,L as r};
