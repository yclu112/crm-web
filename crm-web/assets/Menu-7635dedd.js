import{u as e}from"./useHandleData-bcc6e8c1.js";import{_ as a}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-25415f8a.js";import{M as t,g as l,r as i,a as n,e as o}from"./MenuDialog-a30236eb.js";import{d as r,r as s,a as p,b as u,c as d,o as c,e as m,h as _,w as y,g as f,u as w,m as g,i as v,f as b,v as h,A as k,ai as x,q as C,af as j,n as M,H as T,aC as D}from"./index-6dfdc0ee.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./print-7c839e56.js";import"./Dialog.vue_vue_type_style_index_0_lang-6e721bb1.js";const H={class:"table-box"},A=r({__name:"Menu",setup(r){const A=s(),E=s(!0),L=s(!0),P=p({}),q=e=>{let a={...e};return l(a)},N=[{type:"selection",fixed:"left",width:60},{prop:"title",label:"菜单名称",align:"left",search:{el:"input"},width:150},{prop:"type",label:"菜单类型",width:160,render:e=>"MENU_DIR"==e.row.type?b(u("el-tag"),{type:"danger"},{default:()=>[v("菜单目录")]}):"MENU"==e.row.type?b(u("el-tag"),{type:"success"},{default:()=>[v("菜单项")]}):b(u("el-tag"),{type:"info"},{default:()=>[v("按钮")]})},{prop:"icon",label:"菜单图标",width:120},{prop:"name",label:"菜单 name"},{prop:"path",label:"路由路径",width:200},{prop:"component",label:"组件路径",width:200},{prop:"auth",label:"授权标识",width:150},{prop:"sort",label:"排序(正序)",width:130},{prop:"operation",label:"操作",width:250,fixed:"right"}],R=s(),U=(e,a={})=>{let t={title:e,row:{...a},isView:"查看"===e,api:"新增"===e?n:"编辑"===e?o:"",getTableList:A.value.getTableList};R.value.acceptParams(t)};return(l,n)=>{const o=u("el-button"),r=u("el-icon"),s=d("hasPermi");return c(),m("div",H,[L.value?(c(),_(a,{key:0,ref_key:"proTable",ref:A,title:"菜单列表","row-key":"id",indent:30,columns:N,"request-api":q,"init-param":P,searchCol:{xs:2,sm:3,md:4,lg:6,xl:8},pagination:!1,expandAll:E.value},{tableHeader:y(()=>[f((c(),_(o,{type:"primary",icon:w(g),onClick:n[0]||(n[0]=e=>U("新增"))},{default:y(()=>[...n[2]||(n[2]=[v("新增菜单",-1)])]),_:1},8,["icon"])),[[s,["sys:menu:add"]]]),b(o,{onClick:n[1]||(n[1]=e=>{return a=!E.value,L.value=!1,E.value=a,void D(()=>{L.value=!0});var a}),type:E.value?"danger":"warning"},{default:y(()=>[h("span",null,k(E.value?"收缩全部":"展开所有"),1)]),_:1},8,["type"])]),icon:y(e=>[e.row.icon?(c(),_(r,{key:0,size:18},{default:y(()=>[(c(),_(x(e.row.icon)))]),_:2},1024)):C("",!0)]),operation:y(a=>[f((c(),_(o,{type:"info",link:"",icon:w(j),onClick:e=>U("查看",a.row)},{default:y(()=>[...n[3]||(n[3]=[v("查看",-1)])]),_:1},8,["icon","onClick"])),[[s,["sys:menu:view"]]]),f((c(),_(o,{type:"primary",link:"",icon:w(M),onClick:e=>U("编辑",a.row)},{default:y(()=>[...n[4]||(n[4]=[v("编辑",-1)])]),_:1},8,["icon","onClick"])),[[s,["sys:menu:edit"]]]),f((c(),_(o,{type:"danger",link:"",icon:w(T),onClick:t=>(async a=>{await e(i,{id:a.id},`删除【${a.title}】菜单`),A.value.getTableList()})(a.row)},{default:y(()=>[...n[5]||(n[5]=[v("删除",-1)])]),_:1},8,["icon","onClick"])),[[s,["sys:menu:remove"]]])]),_:1},8,["init-param","expandAll"])):C("",!0),b(t,{ref_key:"dialogRef",ref:R},null,512)])}}});export{A as default};
