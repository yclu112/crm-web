import{_ as e}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-25415f8a.js";import{C as t}from"./index-6fd7493a.js";import{C as a}from"./enum-ebf888b2.js";import{d as i,r,a as s,b as o,c as l,o as p,e as n,f as u,w as _,g as m,h as c,i as d,u as g,m as v,n as y,p as f,s as b,q as h}from"./index-6dfdc0ee.js";import j from"./ContractDialog-32b54b6b.js";import{_ as C}from"./PrintContractDialog.vue_vue_type_style_index_0_lang-e066665b.js";import{u as x}from"./useHandleData-bcc6e8c1.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./print-7c839e56.js";import"./Dialog.vue_vue_type_style_index_0_lang-6e721bb1.js";import"./CustomerDialog.vue_vue_type_script_setup_true_lang-f2c5b605.js";import"./CustomerManage.vue_vue_type_script_setup_true_name_CustomerManage_lang-e25c68d2.js";import"./index-d897ae39.js";import"./CustomerDialog.vue_vue_type_script_setup_true_lang-a24c0c3c.js";import"./ProductDialog.vue_vue_type_script_setup_true_lang-03d938c9.js";import"./ProductManage.vue_vue_type_script_setup_true_name_ProductManage_lang-ed63003d.js";import"./ProductDialog.vue_vue_type_script_setup_true_lang-c7213267.js";import"./ProductStateDialog.vue_vue_type_script_setup_true_lang-52d28081.js";const k={class:"table-box"},P=i({__name:"ContractManage",setup(i){const P=r(),w=s({}),D=e=>({list:e.list,total:e.total}),T=[{type:"selection",fixed:"left",width:60},{prop:"name",label:"合同名称",minWidth:120,search:{el:"input"}},{prop:"number",label:"合同编号",minWidth:120,search:{el:"input"}},{prop:"customerName",label:"客户姓名",minWidth:120,search:{el:"input"}},{prop:"amount",label:"合同金额",minWidth:100},{prop:"receivedAmount",label:"已收到款项",minWidth:140},{prop:"status",label:"合同状态",minWidth:120,enum:Object.values(a),search:{el:"select"}},{prop:"signTime",label:"签约时间",minWidth:140},{prop:"startTime",label:"合同开始时间",minWidth:140},{prop:"endTime",label:"合同结束时间",minWidth:140},{prop:"operation",label:"操作",fixed:"right",width:330}],W=r(),M=(e,a={})=>{let i={title:e,row:{...a},isView:"查看"===e,api:t.saveOrEdit,getTableList:P.value.getTableList,maxHeight:"550px"};W.value.acceptParams(i)},H=r();return(a,i)=>{const r=o("el-button"),s=l("hasPermi");return p(),n("div",k,[u(e,{ref_key:"proTable",ref:P,title:"合同列表",columns:T,requestApi:g(t).page,initParam:w,dataCallback:D,searchCol:{xs:2,sm:3,md:4,lg:6,xl:8}},{tableHeader:_(()=>[m((p(),c(r,{type:"primary",icon:g(v),onClick:i[0]||(i[0]=e=>M("新增"))},{default:_(()=>[...i[1]||(i[1]=[d("新增合同",-1)])]),_:1},8,["icon"])),[[s,["sys:contract:add"]]])]),operation:_(e=>[m((p(),c(r,{type:"primary",link:"",icon:g(y),onClick:t=>M("编辑",e.row)},{default:_(()=>[...i[2]||(i[2]=[d("编辑",-1)])]),_:1},8,["icon","onClick"])),[[s,["sys:contract:edit"]]]),m((p(),c(r,{type:"success",link:"",icon:g(f),onClick:t=>((e,t={})=>{let a={title:e,row:{...t},isView:!0,maxHeight:"600px",fullscreen:!0};H.value.acceptParams(a)})("打印合同",e.row)},{default:_(()=>[...i[3]||(i[3]=[d("打印",-1)])]),_:1},8,["icon","onClick"])),[[s,["sys:contract:print"]]]),0===e.row.status?m((p(),c(r,{key:0,type:"info",link:"",icon:g(b),onClick:a=>(async e=>{await x(t.startApproval,{id:e.id},"发起合同审核"),P.value.getTableList()})(e.row)},{default:_(()=>[...i[4]||(i[4]=[d(" 审核",-1)])]),_:1},8,["icon","onClick"])),[[s,["sys:contract:audit"]]]):h("",!0)]),_:1},8,["requestApi","initParam"]),u(j,{ref_key:"dialogRef",ref:W},null,512),u(C,{ref_key:"printDialogRef",ref:H},null,512)])}}});export{P as default};
